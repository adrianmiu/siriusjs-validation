!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SiriusValidation=e():t.SiriusValidation=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e);var r={_default:"Field is not valid",required:"This field is required",required_with:"This field is required",required_without:"This field is required",email:"This field is not a valid email",url:"This field is not a valid web address (must start with http:// or https://)",contains:'This field should contain "{target}"',starts_with:'This field should start with "{target}"',ends_with:'This field should end with "{target}"',equal:"This field should be equal to {target}",min:"This field should be greater or equal to {min}",max:"This field should be smaller or equal to {max}",alpha:"This field should contain only letters",alpha_num:"This field should contain only letters and numbers",slug:'This field should contain only letters, numbers, "-" or "_"',regex:"This field does not match the pattern",greater_than:"This field should be greater or equal to {min}",less_than:"This field should be smaller or equal to {max}",array_min_length:"This list should contain at least {min} items",array_max_length:"This list should contain less than {max} items",min_length:"This field should have at least {min} characters",max_length:"This field should have less than {max} characters",in_list:"This field should be selected from the list of accepted values",not_in_list:"This field has a value that is blacklisted"},i=function(t,e){if(-1===e.indexOf("*"))return e;var n=t.replace(/\]/g,"").split("[");return e.replace(/\]/g,"").split("[").map((function(t,e){return"*"===t?n[e]:t})).reduce((function(t,e,n){return t+=0===n?e:"["+e+"]"}),"")};var a=function t(e,n,r){var i=n.indexOf("["),a=n.indexOf("]");if(-1===i)return e&&e[n]||r;var o=n.substr(0,i),u=n.substr(i+1,a-i-1)+n.substr(a+1);return t(e[o],u,r)},o=function(t,e,n){return t&&e&&n.substr&&"@"===n.substr(0,1)?a(t,i(e,n.substr(1))):n},u=function(t,e){return Object.keys(t).forEach((function(n){return e(n,t[n])}))},s=function(t,e,n,i,a){a=a||r;var s=t.$rules[n][i].params||{},l={};u(s,(function(n,r){l[n]=o(t.data,e,r)}));var f=[e+":"+i,n+":"+i,i].find((function(t){return a[t]})),c=!!f&&a[f];return"function"==typeof c?c(t,e,n):c?(u(s,(function(n,r){c=c.replace(new RegExp("{"+n+"}","g"),o(t.getData(),e,r))})),c):a._default||"Field is not valid"},l=function(t,e){return function(){var n=Array.prototype.slice.call(arguments),r={},i=[];return e?(r=e.reduce((function(t,e,r){return t[e]=n[r],t}),{}),i=e.reduce((function(t,e,r){var i=n[r];return("string"==typeof i||i instanceof String)&&"@"===i.substr(0,1)&&t.push(i.substr(1)),t}),[])):r=n,{refs:i,params:r,validate:t}}},f=function(t){return Array.isArray(t)?t.length>0:!1===t||0===t||!!t},c=l((function(t){return f(t)})),h=l((function(t,e,n){return!o(n,e,this.params.target)||f(t)}),["target"]),d=l((function(t,e,n){return!!o(n,e,this.params.target)||f(t)}),["target"]),m=l((function(t,e,n){return t==o(n,e,this.params.target)}),["target"]),p=l((function(t,e,n){return!f(t)||+t>=+o(n,e,this.params.min)}),["min"]),g=l((function(t,e,n){return!f(t)||+t<=o(n,e,this.params.max)}),["max"]),y=l((function(t,e,n){return!f(t)||t.length&&t.length>=o(n,e,this.params.min)}),["min"]),b=l((function(t,e,n){return!f(t)||t.length&&t.length<=o(n,e,this.params.max)}),["max"]),v=l((function(t){return!f(t)||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.toLowerCase())})),_=l((function(t){return!f(t)||/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/.test(t.toLowerCase())})),x={required:c,required_with:h,required_without:d,equal:m,greater_than:p,lower_than:g,min:p,max:g,min_length:y,max_length:b,contains:l((function(t){return!f(t)||-1!==t.indexOf(this.params.target)}),["target"]),starts_with:l((function(t){return!f(t)||t.substr(0,this.params.target.length)===this.params.target}),["target"]),ends_with:l((function(t){return!f(t)||t.substr(-this.params.target.length)===this.params.target}),["target"]),email:v,url:_,in_list:l((function(t){return!f(t)||-1!==this.params.target.indexOf(t)}),["target"]),not_in_list:l((function(t){return!f(t)||-1===this.params.target.indexOf(t)}),["target"]),alpha:l((function(t){return!f(t)||/^[a-zA-Z]*$/.test(t)})),alpha_num:l((function(t){return!f(t)||/^[a-zA-Z0-9]*$/.test(t)})),slug:l((function(t){return!f(t)||/^[a-zA-Z0-9_-]*$/.test(t)})),regex:l((function(t){return!f(t)||new RegExp(this.params.pattern,this.params.modifiers||"").test(t)}),["pattern","modifiers"]),integer:l((function(t){return!f(t)||t==parseInt(t)})),number:l((function(t){return!f(t)||t==parseFloat(t)})),array_min_length:y,array_max_length:b};function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var T=function(t){if("object"===w(t))return t;if("string"!=typeof t)throw"Validation rules definition should be a string";var e=t.split(" | "),n={};return e.forEach((function(t){var e=function(t){if(-1===t.indexOf("("))return{name:t,params:[]};if(")"!==t.substr(-1,1))throw'Rule expression is not correct. Good expression: "between(3,5)"';var e=t.indexOf("("),n=[t.substr(0,e),t.substr(e+1,t.length-e-2)];return{name:n[0],params:n[1]?JSON.parse("["+n[1]+"]"):""}}(t);if(!x[e.name])throw"Rule named "+e.name+" is not registered";n[e.name]=x[e.name].apply(null,e.params)})),n};var O=function(t,e,n){var r=e.replace(/\]/g,"").split("["),i=t;return r.map((function(t,e){if(e!==r.length-1){if(!i[t]){var a=r[e+1];i[t]=a==parseInt(a)?[]:{}}i=i[t]}else i[t]=n})),t},S=function(t,e){if(-1===e.indexOf("*"))return t===e;var n=new RegExp(e.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace("*","([^\\]]+)"));return!!t.match(n)},j=function(t,e){var n=Object.keys(e).filter((function(e){return S(t,e)}));if(0==n.length)return!1;n.sort((function(t,e){var n=-(t.match(/\*/gi)||[]).length,r=-(e.match(/\*/gi)||[]).length;return n<r?-1:n>r?1:0}));var r=[];return n.forEach((function(t){u(e[t],(function(e,n){r.find((function(t){return t.name==e}))||r.push({selector:t,name:e,validator:n})}))})),r};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var q=function(t){return t&&(Array.isArray(t)||"object"===E(t)&&Object.keys(t).length>0)};var P=function t(e,n){var r={};return q(e)&&u(e,(function(e,i){var a=n?n+"["+e+"]":e;r[a]=i,q(i)&&Object.assign(r,t(i,a))})),r},$=function(t){var e={};return u(t,(function(t,n){u(n,(function(n,r){r.refs&&r.refs.length&&r.refs.forEach((function(n){e[n]=e[n]||[],e[n].push(t)}))}))})),e};function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var D=function(t,e,n,o,l){var f={},c={},h={},d={},m={},p={};n=n||console.log,l=l||s,o=Object.assign({},r,o);var g={$rules:{},getData:function(){return p},setData:function(t,e,n){var r=this;n&&u(t,(function(t){delete p[t]})),u(t,(function(t,n){r.set(t,n,e)}))},get:function(t){return a(p,t)},set:function(t,e,n){var r=this,a=this.get(t);O(p,t,e),this.setTouched(t),a!==e&&(this.setDirty(t),n||this.validateItem(t)),!n&&m[t]&&m[t].forEach((function(e){var n=i(t,e);r.isTouched(n)&&r.validateItem(n)}))},addRules:function(t,e){var n=this;"object"===A(t)?u(t,(function(t,e){n.$rules[t]=T(e)})):this.$rules[t]=T(e),m=$(this.$rules)},removeRules:function(t,e){var n=this;this.$rules[t]&&(Array.isArray(e)||(e=[e]),e.forEach((function(e){n.$rules[t][e]&&delete n.$rules[t][e]})),m=$(this.$rules))},setTouched:function(t){f[t]=!0},isTouched:function(t){return!!f[t]},resetTouched:function(){f={}},setDirty:function(t){c[t]=!0},isDirty:function(t){return!!c[t]},resetDirty:function(){c={}},setError:function(t,n){d[t]=n,function(t){"function"==typeof e&&e.call(g,"validation",t)}(t)},hasError:function(t){return t?!!d[t]:Object.values(d).filter((function(t){return!!t})).length>0},getError:function(t){return d[t]},setPending:function(t,n){h[t]=!!n,function(t){"function"==typeof e&&e.call(g,"state",t)}(t)},isPending:function(t){return t?h[t]:!!Object.values(h).find((function(t){return!!t}))},isValid:function(){return!this.hasError()},validateItem:function(t){var e=this,r=j(t,this.$rules),i=this.get(t);if(q(i)&&(u(d,(function(e){e!==t&&e.substr(0,t.length)===t&&delete d[e]})),u(i,(function(n){e.validateItem(t+"["+n+"]")}))),r&&0!==r.length)try{var a=null,s=function(){var u=r[f];if(!u.validator||!u.validator.validate)return"continue";var s=u.validator.validate(i,t,p);return!1===s?(a=l(e,t,u.selector,u.name,o),"break"):s.then?(e.setPending(t,!0),s.then((function(n){!1===n?e.setError(t,l(e,t,u.selector,u.name,o)):e.setError(t,null),e.setPending(t,!1)})).catch((function(t){n.call(this,"field_validation",t)})),"break"):void 0};t:for(var f=0,c=r.length;f<c;f++){switch(s()){case"continue":continue;case"break":break t}}this.setError(t,a)}catch(t){n.call(this,"field_validation",t)}else this.setError(t,null)},validate:function(){var t,e=this;return t=p,Object.keys(this.$rules).forEach((function(e){var n=e.indexOf("[");-1!==n&&(e=e.substr(0,n)),t.hasOwnProperty(e)||(t[e]=null)})),Object.keys(P(p)).forEach((function(t){d.hasOwnProperty(t)||(e.validateItem(t),e.setTouched(t),e.setDirty(t))})),this.isPending()?new Promise((function(t){var r=new Date,i=setInterval((function(){new Date-r>5e3?(clearInterval(i),n.call(e,"promise",new Error("Data validation has timed out"))):e.isPending()||t(e.isValid())}),100)})):Promise.resolve(this.isValid())},reset:function(){this.resetTouched(),this.resetDirty(),h={},d={}}};return t&&g.addRules(t),g};var k={messages:r,rules:x,add_rule:function(t,e,n){x[t]=e,r[t]=n},utils:{get:a,set:O,get_ref_path:i,is_path_matching_selector:S},build:D};e.default=k}]).default}));