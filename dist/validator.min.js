!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SiriusValidation=e():t.SiriusValidation=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e);var r={_default:"Field is not valid",required:"This field is required",email:"This field is not a valid email",url:"This field is not a valid web address (must start with http:// or https://)",contains:'This field should contain "{target}"',starts_with:'This field should start with "{target}"',ends_with:'This field should end with "{target}"',equal:"This field should be equal to {target}",min:"This field should be greater or equal to {min}",max:"This field should be smaller or equal to {max}",greater_than:"This field should be greater or equal to {min}",less_than:"This field should be smaller or equal to {max}",array_min_length:"This list should contain at least {min} items",array_max_length:"This list should contain less than {max} items",min_length:"This field should have at least {min} characters",max_length:"This field should have less than {max} characters",in_list:"This field should be selected from the list of accepted values",not_in_list:"This field has a value that is blacklisted"},i=function(t,e){if(-1===e.indexOf("*"))return e;var n=t.replace(/\]/g,"").split("[");return e.replace(/\]/g,"").split("[").map((function(t,e){return"*"===t?n[e]:t})).reduce((function(t,e,n){return t+=0===n?e:"["+e+"]"}),"")};var a=function t(e,n,r){var i=n.indexOf("["),a=n.indexOf("]");if(-1===i)return e&&e[n]||r;var o=n.substr(0,i),u=n.substr(i+1,a-i-1)+n.substr(a+1);return t(e[o],u,r)},o=function(t,e,n){return t&&e&&n.substr&&"@"===n.substr(0,1)?a(t,i(e,n.substr(1))):n},u=function(t,e,n,i,a){a=a||r;t.get(e);var u=t.$rules[n][i].params||{},s={};Object.keys(u).forEach((function(n){s[u]=o(t.data,e,u[n])}));var l=[e+":"+i,n+":"+i,i].find((function(t){return a[t]})),f=!!l&&a[l];return"function"==typeof f?f(t,e,n):f?(Object.keys(u).forEach((function(n){f=f.replace(new RegExp("{"+n+"}","g"),o(t.getData(),e,u[n]))})),f):a._default||"Field is not valid"},s=function(t,e){return function(){var n=Array.prototype.slice.call(arguments),r={},i=[];return e?(r=e.reduce((function(t,e,r){return t[e]=n[r],t}),{}),i=e.reduce((function(t,e,r){var i=n[r];return("string"==typeof i||i instanceof String)&&"@"===i.substr(0,1)&&t.push(i.substr(1)),t}),[])):r=n,{refs:i,params:r,validate:t}}},l=function(t){return Array.isArray(t)?t.length>0:!1===t||0===t||!!t},f=s((function(t){return l(t)})),c=s((function(t,e,n){return!o(n,e,this.params.target)||l(t)}),["target"]),h=s((function(t,e,n){return!!o(n,e,this.params.target)||l(t)}),["target"]),d=s((function(t,e,n){return t==o(n,e,this.params.target)}),["target"]),m=s((function(t,e,n){return!l(t)||+t>=+o(n,e,this.params.min)}),["min"]),p=s((function(t,e,n){return!l(t)||+t<=o(n,e,this.params.max)}),["max"]),g=s((function(t,e,n){return!l(t)||t.length&&t.length>=o(n,e,this.params.min)}),["min"]),y=s((function(t,e,n){return!l(t)||t.length&&t.length<=o(n,e,this.params.max)}),["max"]),b=s((function(t){return!l(t)||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.toLowerCase())})),v=s((function(t){return!l(t)||/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/.test(t.toLowerCase())})),_={required:f,required_with:c,required_without:h,equal:d,greater_than:m,lower_than:p,min:m,max:p,min_length:g,max_length:y,contains:s((function(t){return!l(t)||-1!==t.indexOf(this.params.target)}),["target"]),starts_with:s((function(t){return!l(t)||t.substr(0,this.params.target.length)===this.params.target}),["target"]),ends_with:s((function(t){return!l(t)||t.substr(-this.params.target.length)===this.params.target}),["target"]),email:b,url:v,in_list:s((function(t){return!l(t)||-1!==this.params.target.indexOf(t)}),["target"]),not_in_list:s((function(t){return!l(t)||-1===this.params.target.indexOf(t)}),["target"]),alpha:s((function(t){return!l(t)||/^[a-zA-Z]*$/.test(t)})),alpha_num:s((function(t){return!l(t)||/^[a-zA-Z0-9]*$/.test(t)})),slug:s((function(t){return!l(t)||/^[a-zA-Z0-9_-]*$/.test(t)})),regex:s((function(t){return!l(t)||new RegExp(this.params.pattern,this.params.modifiers||"").test(t)}),["pattern","modifiers"]),integer:s((function(t){return!l(t)||t==parseInt(t)})),number:s((function(t){return!l(t)||t==parseFloat(t)})),array_min_length:g,array_max_length:y};function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var O=function(t){if("object"===x(t))return t;if("string"!=typeof t)throw"Validation rules definition should be a string";var e=t.split(" | "),n={};return e.forEach((function(t){var e=function(t){if(-1===t.indexOf("("))return{name:t,params:[]};if(")"!==t.substr(-1,1))throw'Rule expression is not correct. Good expression: "between(3,5)"';var e=t.indexOf("("),n=[t.substr(0,e),t.substr(e+1,t.length-e-2)];return{name:n[0],params:n[1]?JSON.parse("["+n[1]+"]"):""}}(t);if(!_[e.name])throw"Rule named "+e.name+" is not registered";n[e.name]=_[e.name].apply(null,e.params)})),n};var w=function(t,e,n){var r=e.replace(/\]/g,"").split("["),i=t;return r.map((function(t,e){if(e!==r.length-1){if(!i[t]){var a=r[e+1];i[t]=a==parseInt(a)?[]:{}}i=i[t]}else i[t]=n})),t},j=function(t,e){if(-1===e.indexOf("*"))return t===e;var n=new RegExp(e.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace("*","([^\\]]+)"));return!!t.match(n)},E=function(t,e){var n=Object.keys(e).filter((function(e){return j(t,e)}));if(0==n.length)return!1;n.sort((function(t,e){var n=-(t.match(/\*/gi)||[]).length,r=-(e.match(/\*/gi)||[]).length;return n<r?-1:n>r?1:0}));var r=[];return n.forEach((function(t){Object.keys(e[t]).forEach((function(n){r.find((function(t){return t.name==n}))||r.push({selector:t,name:n,validator:e[t][n]})}))})),r};function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var S=function(t){return t&&(Array.isArray(t)||"object"===T(t)&&Object.keys(t).length>0)};var k=function t(e,n){var r={};return S(e)&&Object.keys(e).forEach((function(i){var a=n?n+"["+i+"]":i,o=e[i];r[a]=o,S(o)&&Object.assign(r,t(o,a))})),r},P=function(t,e){return Object.keys(t).forEach((function(n){return e(n,t[n])}))},$=function(t){var e={};return P(t,(function(t,n){P(n,(function(n,r){r.refs&&r.refs.length&&r.refs.forEach((function(n){e[n]=e[n]||[],e[n].push(t)}))}))})),e};function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var q=function(t,e,n,o,s){var l={},f={},c={},h={},d={},m={};n=n||console.log,s=s||u,o=Object.assign({},r,o);var p={$rules:{},getData:function(){return m},setData:function(t,e,n){var r=this;n&&Object.keys(t).forEach((function(t){delete m[t]})),Object.keys(t).forEach((function(n){r.set(n,t[n],e)}))},get:function(t){return a(m,t)},set:function(t,e,n){var r=this,a=this.get(t);w(m,t,e),this.setTouched(t),a!==e&&(this.setDirty(t),n||this.validateItem(t)),!n&&d[t]&&d[t].forEach((function(e){var n=i(t,e);r.isTouched(n)&&r.validateItem(n)}))},addRules:function(t,e){var n=this;"object"===A(t)?Object.keys(t).forEach((function(e){n.$rules[e]=O(t[e])})):this.$rules[t]=O(e),d=$(this.$rules)},removeRules:function(t,e){var n=this;this.$rules[t]&&(Array.isArray(e)||(e=[e]),e.forEach((function(e){n.$rules[t][e]&&delete n.$rules[t][e]})),d=$(this.$rules))},setTouched:function(t){l[t]=!0},isTouched:function(t){return!!l[t]},resetTouched:function(){l={}},setDirty:function(t){f[t]=!0},isDirty:function(t){return!!f[t]},resetDirty:function(){f={}},setError:function(t,n){h[t]=n,function(t){"function"==typeof e&&e.call(p,"validation",t)}(t)},hasError:function(t){return t?!!h[t]:Object.values(h).filter((function(t){return!!t})).length>0},getError:function(t){return h[t]},setPending:function(t,n){c[t]=!!n,function(t){"function"==typeof e&&e.call(p,"state",t)}(t)},isPending:function(t){return t?c[t]:Object.values(c).filter((function(t){return!!t})).length>0},isValid:function(){return!this.hasError()},validateItem:function(t){var e=this,r=E(t,this.$rules),i=this.get(t);if(S(i)&&(Object.keys(h).forEach((function(e){e!==t&&e.substr(0,t.length)===t&&delete h[e]})),Object.keys(i).forEach((function(n){e.validateItem(t+"["+n+"]")}))),r&&0!==r.length)try{var a=null,u=function(){var u=r[l];if(!u.validator||!u.validator.validate)return"continue";var f=u.validator.validate(i,t,m);return!1===f?(a=s(e,t,u.selector,u.name,o),"break"):f.then?(e.setPending(t,!0),f.then((function(n){!1===n?e.setError(t,s(e,t,u.selector,u.name,o)):e.setError(t,null),e.setPending(t,!1)})).catch((function(t){n.call(this,"field_validation",t)})),"break"):void 0};t:for(var l=0,f=r.length;l<f;l++){switch(u()){case"continue":continue;case"break":break t}}this.setError(t,a)}catch(t){n.call(this,"field_validation",t)}else this.setError(t,null)},validate:function(){var t,e=this;return t=m,Object.keys(this.$rules).forEach((function(e){var n=e.indexOf("[");-1!==n&&(e=e.substr(0,n)),t.hasOwnProperty(e)||(t[e]=null)})),Object.keys(k(m)).forEach((function(t){h.hasOwnProperty(t)||(e.validateItem(t),e.setTouched(t),e.setDirty(t))})),this.isPending()?new Promise((function(t){var r=new Date,i=setInterval((function(){new Date-r>5e3?(clearInterval(i),n.call(e,new Error("Data validation has timed out"))):e.isPending()||t(e.isValid())}),100)})):Promise.resolve(this.isValid())},reset:function(){this.resetTouched(),this.resetDirty(),c={},h={}}};return t&&p.addRules(t),p};var D={messages:r,rules:_,add_rule:function(t,e,n){_[t]=e,r[t]=n},utils:{get:a,set:w,get_ref_path:i,is_path_matching_selector:j},build:q};e.default=D}]).default}));